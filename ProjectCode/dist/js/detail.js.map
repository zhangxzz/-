{"version":3,"sources":["detail.js"],"names":["$","queryString","arr","location","search","slice","split","i","length","value","obj","key","id","data","html","concat","goods_small_logo","goods_big_logo","goods_name","goods_price","onmouseleave","style","display","log","left","offset","getElementById","top","big","pageX","bigImg","document","dom","body","offsetLeft","clientLeft","offsetTop","clientTop","offsetParent","fdj","onmouseenter","clientHeight","box","clientWidth","onmousemove","e","pageY","x1","y1"],"mappings":"aAAAA,EAAE,WAQE,IARF,IAEMC,EAAAA,GAIJC,EANUC,SAAAC,OAAAC,MAAA,GAMVC,MAAA,KAESC,EAAI,EAAGA,EAAIL,EAAIM,OAAQD,IAAK,CADjCL,IAAMD,EAAAA,EAAAA,GAAYK,MAAM,KAA5B,GAGQG,EAAQP,EAAIK,GAAGD,MAAM,KAAK,GAF7BI,EAAKC,GAAOF,EAGbC,IAAIC,EAAJD,EAAWD,GAGfT,EAAIY,IAAE,yBAGN,CAAAA,GAAAA,GAAA,SAAAC,GACMb,EAAA,UAAAc,KAAA,kIAAAC,OACFF,EAAAA,KAAAG,iBADE,yLAAAD,OA4BuBF,EAAAA,KAAAI,eA5BvB,kJAAAF,OA6BEF,EAAAA,KAAAK,WA7BF,8IAAAH,OAgB2EF,EAAKA,KAAKM,YAhBrF,kPA2BYnB,EAAE,WAkBZoB,MAAJ,WACQC,EAAAA,IAAMC,uBAAV,CAAAV,GAAAA,GAAA,SAAAC,GACUS,QAAVC,IAAoBV,OApBxB,IAyBQW,EAAOC,SAAMC,eAAjB,OACIC,EAAMF,SAAAC,eAAV,OAEKE,EAAGC,SAARH,eAAA,OACKI,EAAQC,SAAbL,eAAA,UA1EZ,SAAAD,EAAAO,GAsGY,IAFA,IAAIR,EAAO,EACPG,EAAM,EACHK,GAAOD,SAASE,MACnBT,GAAQQ,EAAIE,WAAaF,EAAIG,WAC7BR,GAAOK,EAAII,UAAYJ,EAAIK,UAC3BL,EAAMA,EAAIM,aAEd,MAAO,CACHd,KAAMA,EACNG,IAAKA,GAhCTY,EAAMC,aAAWC,WAjBjBC,EAAIrB,MAAMC,QAAU,QAmBdM,EAANP,MAAYC,QAAA,SAEXiB,EAAAnB,aAAA,WAjBDsB,EAAIrB,MAAMC,QAAU,OAkBdM,EAAGW,MAAII,QAAJ,QAERJ,EAAAK,YAAA,SAAAC,GAhBD,IAAIhB,EAAQgB,EAAEhB,MAiBdiB,EAAYD,EAAAC,MACRtB,EAAAC,EAAAc,GAAAf,KACHG,EAAAF,EAAAc,GAAAZ,IAXGoB,EAYSN,EAAAA,EAZAC,EAAIC,YAAc,EAgBrBnB,EAHGiB,EAAAA,EAGMC,EAAGD,aAAtB,GAIOpB,EADAA,EAAMG,EACAG,EAdToB,GAAKR,EAAII,YAAcD,EAAIC,cAiB1BlB,EAAOO,EAAKW,YAAAD,EAAAC,cAbbK,EAeMA,EAAV,EAfS,EAiBGhB,GAAIE,EAAAA,aAAiBC,EAAAA,eACtBH,EAAII,EAAAA,aAAgBC,EAA3BI,cAZJC,EAAIrB,MAAMG,KAAOuB,EAAK,KAetBL,EAAOrB,MAAAM,IAAAqB,EAAA,KAEAlB,EAAEH,MAAAA,MAAAA,EAjCC,KAiCDA,KAFTG,EAAAT,MAAAM,KAAAqB,EA/BU,KA+BV","file":"detail.js","sourcesContent":["$(function () {\r\n    // 1 从URL中获取商品id\r\n    let queryString = location.search.slice(1);\r\n    // 2 将queryString转为对象 \r\n    let obj = {};\r\n    // a=1&b=2&c=3 \r\n    // [\"a=1\", \"b=2\", \"c=3\"]\r\n    let arr = queryString.split(\"&\");\r\n    for (var i = 0; i < arr.length; i++) {\r\n        var key = arr[i].split(\"=\")[0]\r\n        var value = arr[i].split(\"=\")[1]\r\n        obj[key] = value;\r\n    }\r\n    // 3 获取里面的id\r\n    var id = obj.id;\r\n\r\n\r\n    // 根据id获取单条数据\r\n    $.get(\"/lession05/getDataById\", { id }, function (data) {\r\n        // 渲染商品详情\r\n        $(\"#panel\").html(`\r\n            <div class=\"col-4\">\r\n                <div id=\"fdj\" class=\"fdj\">\r\n                    <img draggable=\"false\" src=\"${data.data.goods_small_logo}\" alt=\"\">\r\n                    <div id=\"box\" class=\"box\">\r\n                    </div>\r\n                    <div id=\"big\" class=\"big\">\r\n                        <img id=\"bigImg\" src=\"${data.data.goods_big_logo}\" alt=\"\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-6 infos\">\r\n                <h3>${data.data.goods_name}</h3>\r\n                <div class=\"p-3 bg-secondary\">\r\n                    <span class=\"text-white\">京东价:</span><span class=\"text-danger\">¥${data.data.goods_price}</span>\r\n                </div>\r\n                <button type=\"button\" id=\"addBtn\" class=\"btn btn-lg btn-danger\" >加入购物车</button>\r\n            </div>\r\n            <div class=\"ad col-2\">\r\n                看了又看\r\n            </div> \r\n        `);\r\n\r\n\r\n        // 加入购物车\r\n        var $addBtn = $(\"#addBtn\");\r\n        $addBtn.click(function() {\r\n            $.get(\"/lession05/addToCart\", {id}, function(data) {\r\n                console.log(data);\r\n            })\r\n        })\r\n\r\n\r\n        // 放大镜相关js\r\n        var box = document.getElementById(\"box\");\r\n        var fdj = document.getElementById(\"fdj\");\r\n        var big = document.getElementById(\"big\")\r\n        var bigImg = document.getElementById(\"bigImg\");\r\n        var r = 348 / 800;\r\n        fdj.onmouseenter = function () {\r\n            box.style.display = \"block\";\r\n            big.style.display = \"block\"\r\n        }\r\n        fdj.onmouseleave = function () {\r\n            box.style.display = \"none\";\r\n            big.style.display = \"none\"\r\n        }\r\n        fdj.onmousemove = function (e) {\r\n            var pageX = e.pageX;\r\n            var pageY = e.pageY;\r\n            var left = offset(fdj).left;\r\n            var top = offset(fdj).top;\r\n\r\n            var x = pageX - left;\r\n            var y = pageY - top;\r\n\r\n            var x1 = x - box.clientWidth / 2\r\n            var y1 = y - box.clientHeight / 2\r\n\r\n            if (x1 < 0) {\r\n                x1 = 0;\r\n            }\r\n            if (x1 > fdj.clientWidth - box.clientWidth) {\r\n                x1 = fdj.clientWidth - box.clientWidth\r\n            }\r\n            if (y1 < 0) {\r\n                y1 = 0;\r\n            }\r\n            if (y1 > fdj.clientHeight - box.clientHeight) {\r\n                y1 = fdj.clientHeight - box.clientHeight\r\n            }\r\n\r\n            box.style.left = x1 + \"px\";\r\n            box.style.top = y1 + \"px\";\r\n\r\n            bigImg.style.left = -x1 / r + \"px\";\r\n            bigImg.style.top = -y1 / r + \"px\";\r\n        }\r\n\r\n        function offset(dom) {\r\n            var left = 0;\r\n            var top = 0;\r\n            while (dom != document.body) {\r\n                left += dom.offsetLeft + dom.clientLeft;\r\n                top += dom.offsetTop + dom.clientTop;\r\n                dom = dom.offsetParent;\r\n            }\r\n            return {\r\n                left: left,\r\n                top: top\r\n            }\r\n        }\r\n\r\n    })\r\n\r\n\r\n})"]}