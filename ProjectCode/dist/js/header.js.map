{"version":3,"sources":["header.js"],"names":["$","get","data","html","localStorage","removeItem","username","getItem","log","concat","attr","on","console","success","location","reload","failed","pxmu"],"mappings":"aACAA,EAAE,WAEEA,EAAAC,IAAA,wBAAA,SAAAC,GACMF,EAAA,WAAAG,KAAAD,GAkBMF,EAAAC,IAAA,wBAAA,SAAAC,GACAE,EAAaC,OAAbD,aAAaC,WAAW,YAGxBC,EAAWF,aAAaG,QAAQ,YAChCD,GACQE,QAAIA,IAAZ,OACER,EAAA,eAAFG,KAAE,cAAAM,OAAFH,EAAE,6CACAN,EAAA,YAAiBU,KAAO,MAAA,sBAElBF,QAAIA,IAAZ,WAQZR,EAAE,WAAWW,GAAG,QAAS,QAAS,WAG1BX,EAAIE,IAAI,kBAAQ,SAAAA,GACZU,QAAAJ,IAAAN,GACAE,EAAaC,OAERQ,aAALR,WAAA,YACGS,SAAAC,SACEC,KAAOH,QAAZ,QARRI,KAAAD,OAAA","file":"header.js","sourcesContent":["// 页面加载完成后执行此函数\r\n$(function () {\r\n\r\n    // 发送ajax请求，获取头部页面结构\r\n    $.get(\"/template/header.html\", function (data) {\r\n        $(\"#header\").html(data);\r\n\r\n\r\n        /* // 获取本地存储\r\n        var username = localStorage.getItem(\"username\");\r\n        if (username) {\r\n            console.log(\"已登录\");\r\n            $(\"#willChange\").html(`<a href=\"\">${username}</a><a href=\"\" class=\"exit\">&ensp;退出</a>`);\r\n            $(\"#profile\").attr(\"src\", \"/imgs/profile.jpg\");\r\n        } else {\r\n            console.log(\"未登录\");\r\n        } */\r\n\r\n\r\n        // 发送请求验证登录\r\n        $.get('/lession01/checkLogin', function (data) {\r\n            if (data.error) {\r\n                // 未登录or已超时\r\n                localStorage.removeItem(\"username\");\r\n            }\r\n            // 获取本地存储\r\n            var username = localStorage.getItem(\"username\");\r\n            if (username) {\r\n                console.log(\"已登录\");\r\n                $(\"#willChange\").html(`<a href=\"\">${username}</a><a href=\"\" class=\"exit\">&ensp;退出</a>`);\r\n                $(\"#profile\").attr(\"src\", \"/imgs/profile.jpg\");\r\n            } else {\r\n                console.log(\"未登录\");\r\n            }\r\n        })\r\n\r\n    })\r\n\r\n\r\n    // 发送退出请求\r\n    $('#header').on('click', '.exit', function () {\r\n        $.get('/lession01/exit', function (data) {\r\n            console.log(data);\r\n            if (data.error) {\r\n                // 清空本地存储 刷新页面\r\n                localStorage.removeItem(\"username\");\r\n                location.reload();\r\n                pxmu.success(\"已退出\");\r\n            } else {\r\n                pxmu.failed(\"退出失败！\");\r\n            }\r\n        })\r\n    })\r\n\r\n});\r\n\r\n"]}