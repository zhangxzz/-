{"version":3,"sources":["list.js"],"names":["$","sendAjax","num","get","page","count","data","empty","str","forEach","value","index","concat","goods_small_logo","goods_price","goods_name","goods_id","appendTo","window","scrollTop","activeClass","leng","clickBack","console","log","history","pushState","back","onpopstate","e","children","addClass","state","each","this","removeClass","html"],"mappings":"aAAAA,EAAE,WAAA,SAAAC,EAAYC,GACVF,EAAAG,IAAA,qBAAA,CAAAC,KAAAF,EAAAG,MAAA,IAAA,SAAAC,GAEUN,EAAA,SAAAO,QAAwC,IAAEC,EAAA,GAAMF,EAAUA,KAAVG,QAAgB,SAAAC,EAAAC,GAClEH,GAAA,mEAAAI,OACAF,EAAAG,iBADA,oJAAAD,OAI0CF,EAAAI,YAJ1C,gEAAAF,OAKOF,EAAAK,WALP,wEAAAH,OAIAF,EAAAM,SAJA,2GAiBPhB,EAAAQ,GAAAS,SAAA,SAFOjB,EAAEkB,QAAQC,UAAU,KAWflB,EAAA,GACTmB,QAAAA,aAAa,EAFI,GAAA,aAArBpB,EAMQC,cAAaG,KAHU,CAKvBiB,KAAA,GACAD,YAAA,UANJE,UAAW,SAAUlB,GAHJmB,QAAAC,IAAA,OAAApB,EAAA,KAAAH,EAAAG,EAYV,GAZXqB,QAAAC,UAAAtB,EAAA,GAAA,WAAAA,IAoBMuB,KAjByB,WAmBnBH,QAAIG,UAFhBT,OAAOU,WAAa,SAASC,GASjB7B,QAAQ8B,IAAAA,MAAWC,EAAAA,OACtB9B,EAAA4B,EAAAG,MAAA,GAVThC,EAAA,gBAAAiC,KAAA,WAjDJV,QAAAC,IAAAU,MAoEAlC,EAAAkC,MAAAJ,WAAAK,YAAA,WACAnC,EAAAkC,MAAAJ,WAAAM,QAAAP,EAAAG,OACAhC,EAAAkC,MAAAJ,WAAAC,SAAA","file":"list.js","sourcesContent":["$(function () {\r\n    // 发送请求获取单条数据\r\n    function sendAjax(num) {\r\n        $.get(\"/lession05/getList\", { page: num, count: 32 }, function (data) {\r\n            // 清空当前列表\r\n            $(\"#list\").empty();\r\n\r\n            var str = \"\";\r\n            data.data.forEach(function (value, index) {\r\n                str += `<div class=\"card col-3\">\r\n                            <img src=\"${value.goods_small_logo}\" class=\"card-img-top\" alt=\"...\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title\">￥${value.goods_price}</h5>\r\n                                <p class=\"card-text\">${value.goods_name}</p>\r\n                                <a href=\"/html/detail.html?id=${value.goods_id}\" class=\"btn btn-danger\">查看详情</a>\r\n                            </div>\r\n                        </div>`\r\n            })\r\n            $(str).appendTo(\"#list\");\r\n            $(window).scrollTop(0)\r\n        })\r\n    }\r\n\r\n    \r\n    sendAjax(0);\r\n    history.replaceState(1, \"\", \"/xunide#1\")\r\n\r\n\r\n\r\n    $('.page-test').page({\r\n        leng: 23,//分页总数\r\n        activeClass: 'activeA',\r\n        clickBack: function (page) {\r\n            // 点击数字 下一页 首页 末页的时候执行的代码\r\n            console.log(\"当前是第\" + page + \"页\");\r\n            sendAjax(page - 1);\r\n            // 解决方案1  人为的将第三个参数URL参数与真实路径统一\r\n            // history.pushState(page, \"\", \"/html/list.html\")\r\n            // 解决方案2  需要后端配置一个失败响应页面\r\n            history.pushState(page, \"\", \"/xunide#\" + page);\r\n        },\r\n        back() {\r\n            // 点击上一页的时候执行的代码\r\n            history.back();\r\n        }\r\n    })\r\n\r\n\r\n\r\n    window.onpopstate = function(e) {\r\n        // e.state是pushState的第一个参数page\r\n        console.log(\"触发了\", e.state)\r\n        sendAjax(e.state - 1);\r\n        // 获取所有的数字按钮\r\n        $(\".pagingUl li\").each(function() {\r\n            console.log(this)\r\n            $(this).children().removeClass(\"activeA\")\r\n            if ($(this).children().html() == e.state) {\r\n                $(this).children().addClass(\"activeA\")\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n})\r\n\r\n\r\n\r\n/* \r\n    pushState() 用于增加一个虚拟的历史记录\r\n    replaceState() 用于替换当前的历史记录 \r\n    给window添加了一个事件  window.onpopstate = function() {}  这个事件会在虚拟历史记录发生变化的时候触发\r\n*/"]}