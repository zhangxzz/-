"use strict";$(function(){$.get("/lession05/getShoppingCart",function(n){var t="",d=(n.data.forEach(function(n){t+='<tr>\n                <td>\n                    <input data-id="'.concat(n.goods_id,'" type="checkbox">\n                </td>\n                <td title="').concat(n.goods_name,'">\n                    ').concat(n.goods_name,'\n                </td>\n                <td>\n                    <img src="').concat(n.goods_small_logo,'"\n                        alt="">\n                </td>\n                <td>\n                    ').concat(n.goods_price,"\n                </td>\n                <td>\n                ").concat(n.num,'\n                </td>\n                <td>\n                    <div class="dropdown">\n                        <button class="btn btn-secondary dropdown-toggle" type="button" id=""\n                            data-bs-toggle="dropdown" aria-expanded="false">\n                            操作\n                        </button>\n                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">\n                            <li><a class="dropdown-item plus" data-id="').concat(n.goods_id,'"  href="#">&plus;</a></li>\n                            <li><a class="dropdown-item minus" data-id="').concat(n.goods_id,'"  href="#">&minus;</a></li>\n                            <li><a class="dropdown-item del" data-id="').concat(n.goods_id,'"  href="#">&times;</a></li>\n                        </ul>\n                    </div>\n                </td>\n            </tr>')}),$(t).appendTo("tbody"),n.data),e=$("thead input"),c=$("tbody input");function i(){var n=d.filter(function(n){return n.checked}).reduce(function(n,t){return n+t.goods_price*t.num},0);$("#allCount").html(n)}e.change(function(){var n=$(this).prop("checked");c.prop("checked",n),n?d.forEach(function(n){return n.checked=!0}):d.forEach(function(n){return n.checked=!1}),i()}),c.change(function(){var o=!0,t=(c.each(function(n,t){$(t).is(":checked")||(o=!1)}),e.prop("checked",o),$(this).attr("data-id")),n=(console.log(t),d.find(function(n){return n.goods_id===t}));console.log(n),n.checked=!n.checked,i()}),$("tbody").on("click",".plus",function(){var t=this,o=(console.log("增加"),$(this).data("id"));$.get("/lession05/addToCart",{id:o},function(n){n.error||(n=$(t).parents("td").prev().html(),$(t).parents("td").prev().html(+n+1),(n=d.find(function(n){return n.goods_id==o})).num++,console.log(n),i())})}),$("tbody").on("click",".minus",function(){var t=this,o=(console.log("减少"),$(this).data("id"));$.get("/lession05/minusCart",{id:o},function(n){n.error||(n=$(t).parents("td").prev().html(),$(t).parents("td").prev().html(+n-1),(n=d.find(function(n){return n.goods_id==o})).num--,console.log(n),i())})}),$("tbody").on("click",".del",function(){var t=this,o=$(this).data("id");$.get("/lession05/deleteCart",{id:o},function(n){n.error||($(t).parents("tr").remove(),n=d.findIndex(function(n){return n.goods_id==o}),d.splice(n,1),i())})})})});
//# sourceMappingURL=shoppingCart.js.map
